"use strict";var we=Object.create;var Qr=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var Ae=Object.getOwnPropertyNames;var Fe=Object.getPrototypeOf,Ee=Object.prototype.hasOwnProperty;var Nr=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports),De=(e,a)=>{for(var c in a)Qr(e,c,{get:a[c],enumerable:!0})},Ct=(e,a,c,m)=>{if(a&&typeof a=="object"||typeof a=="function")for(let d of Ae(a))!Ee.call(e,d)&&d!==c&&Qr(e,d,{get:()=>a[d],enumerable:!(m=Se(a,d))||m.enumerable});return e};var Ir=(e,a,c)=>(c=e!=null?we(Fe(e)):{},Ct(a||!e||!e.__esModule?Qr(c,"default",{value:e,enumerable:!0}):c,e)),Me=e=>Ct(Qr({},"__esModule",{value:!0}),e);var Tt=Nr((mt,dt)=>{(function(e,a){typeof mt=="object"&&typeof dt<"u"?dt.exports=a():typeof define=="function"&&define.amd?define(a):(e=typeof globalThis<"u"?globalThis:e||self,e.MiniSearch=a())})(mt,function(){"use strict";var e=function(){return e=Object.assign||function(r){for(var t,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},e.apply(this,arguments)};function a(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],i=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var i=t.call(o),u,n=[],s;try{for(;(r===void 0||r-- >0)&&!(u=i.next()).done;)n.push(u.value)}catch(p){s={error:p}}finally{try{u&&!u.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return n}function m(o,r,t){if(t||arguments.length===2)for(var i=0,u=r.length,n;i<u;i++)(n||!(i in r))&&(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return o.concat(n||Array.prototype.slice.call(r))}var d="ENTRIES",L="KEYS",C="VALUES",g="",Y=function(){function o(r,t){var i=r._tree,u=Array.from(i.keys());this.set=r,this._type=t,this._path=u.length>0?[{node:i,keys:u}]:[]}return o.prototype.next=function(){var r=this.dive();return this.backtrack(),r},o.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var r=$(this._path),t=r.node,i=r.keys;return $(i)===g?{done:!1,value:this.result()}:(this._path.push({node:t.get($(i)),keys:Array.from(t.get($(i)).keys())}),this.dive())},o.prototype.backtrack=function(){this._path.length!==0&&($(this._path).keys.pop(),!($(this._path).keys.length>0)&&(this._path.pop(),this.backtrack()))},o.prototype.key=function(){return this.set._prefix+this._path.map(function(r){var t=r.keys;return $(t)}).filter(function(r){return r!==g}).join("")},o.prototype.value=function(){return $(this._path).node.get(g)},o.prototype.result=function(){return this._type===C?this.value():this._type===L?this.key():[this.key(),this.value()]},o.prototype[Symbol.iterator]=function(){return this},o}(),$=function(o){return o[o.length-1]},ar=function(o,r,t){var i=new Map;if(r===void 0)return i;for(var u=r.length+1,n=u+t,s=new Uint8Array(n*u),p=0;p<u;p++)s[p]=p;return nr(o,r,t,i,s,u,u,""),i},nr=function(o,r,t,i,u,n,s,p){var l,x;try{r:for(var w=a(o.keys()),A=w.next();!A.done;A=w.next()){var S=A.value;if(S===g){var D=u[n-1];D<=t&&i.set(p,[o.get(S),D])}else{for(var E=0;E<S.length;E++){for(var N=S[E],k=n+s*E,I=k-s,T=u[k]=u[I]+1,j=0;j<s-1;j++){var R=N!==r[j],B=u[I+j]+ +R,V=u[I+j+1]+1,X=u[k+j]+1,J=u[k+j+1]=Math.min(B,V,X);J<T&&(T=J)}if(T>t)continue r}nr(o.get(S),r,t,i,u,n+s*S.length,s,p+S)}}}catch(or){l={error:or}}finally{try{A&&!A.done&&(x=w.return)&&x.call(w)}finally{if(l)throw l.error}}},ur=function(){function o(r,t){r===void 0&&(r=new Map),t===void 0&&(t=""),this._size=void 0,this._tree=r,this._prefix=t}return o.prototype.atPrefix=function(r){var t,i;if(!r.startsWith(this._prefix))throw new Error("Mismatched prefix");var u=c(vr(this._tree,r.slice(this._prefix.length)),2),n=u[0],s=u[1];if(n===void 0){var p=c(xr(s),2),l=p[0],x=p[1];try{for(var w=a(l.keys()),A=w.next();!A.done;A=w.next()){var S=A.value;if(S!==g&&S.startsWith(x)){var D=new Map;return D.set(S.slice(x.length),l.get(S)),new o(D,r)}}}catch(E){t={error:E}}finally{try{A&&!A.done&&(i=w.return)&&i.call(w)}finally{if(t)throw t.error}}}return new o(n,r)},o.prototype.clear=function(){this._size=void 0,this._tree.clear()},o.prototype.delete=function(r){return this._size=void 0,Ur(this._tree,r)},o.prototype.entries=function(){return new Y(this,d)},o.prototype.forEach=function(r){var t,i;try{for(var u=a(this),n=u.next();!n.done;n=u.next()){var s=c(n.value,2),p=s[0],l=s[1];r(p,l,this)}}catch(x){t={error:x}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}},o.prototype.fuzzyGet=function(r,t){return ar(this._tree,r,t)},o.prototype.get=function(r){var t=tr(this._tree,r);return t!==void 0?t.get(g):void 0},o.prototype.has=function(r){var t=tr(this._tree,r);return t!==void 0&&t.has(g)},o.prototype.keys=function(){return new Y(this,L)},o.prototype.set=function(r,t){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var i=Lr(this._tree,r);return i.set(g,t),this},Object.defineProperty(o.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var r=this.entries();!r.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),o.prototype.update=function(r,t){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var i=Lr(this._tree,r);return i.set(g,t(i.get(g))),this},o.prototype.fetch=function(r,t){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var i=Lr(this._tree,r),u=i.get(g);return u===void 0&&i.set(g,u=t()),u},o.prototype.values=function(){return new Y(this,C)},o.prototype[Symbol.iterator]=function(){return this.entries()},o.from=function(r){var t,i,u=new o;try{for(var n=a(r),s=n.next();!s.done;s=n.next()){var p=c(s.value,2),l=p[0],x=p[1];u.set(l,x)}}catch(w){t={error:w}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u},o.fromObject=function(r){return o.from(Object.entries(r))},o}(),vr=function(o,r,t){var i,u;if(t===void 0&&(t=[]),r.length===0||o==null)return[o,t];try{for(var n=a(o.keys()),s=n.next();!s.done;s=n.next()){var p=s.value;if(p!==g&&r.startsWith(p))return t.push([o,p]),vr(o.get(p),r.slice(p.length),t)}}catch(l){i={error:l}}finally{try{s&&!s.done&&(u=n.return)&&u.call(n)}finally{if(i)throw i.error}}return t.push([o,r]),vr(void 0,"",t)},tr=function(o,r){var t,i;if(r.length===0||o==null)return o;try{for(var u=a(o.keys()),n=u.next();!n.done;n=u.next()){var s=n.value;if(s!==g&&r.startsWith(s))return tr(o.get(s),r.slice(s.length))}}catch(p){t={error:p}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}},Lr=function(o,r){var t,i,u,n;if(r.length===0||o==null)return o;try{for(var s=a(o.keys()),p=s.next();!p.done;p=s.next()){var l=p.value;if(l!==g&&r.startsWith(l))return Lr(o.get(l),r.slice(l.length))}}catch(E){t={error:E}}finally{try{p&&!p.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}try{for(var x=a(o.keys()),w=x.next();!w.done;w=x.next()){var l=w.value;if(l!==g&&l.startsWith(r[0])){var A=lt(r,l),S=new Map;return S.set(l.slice(A),o.get(l)),o.set(r.slice(0,A),S),o.delete(l),Lr(S,r.slice(A))}}}catch(E){u={error:E}}finally{try{w&&!w.done&&(n=x.return)&&n.call(x)}finally{if(u)throw u.error}}var D=new Map;return o.set(r,D),D},lt=function(o,r){for(var t=Math.min(o.length,r.length),i=0;i<t;i++)if(o[i]!==r[i])return i;return t},Ur=function(o,r){var t=c(vr(o,r),2),i=t[0],u=t[1];if(i!==void 0){if(i.delete(g),i.size===0)Gr(u);else if(i.size===1){var n=c(i.entries().next().value,2),s=n[0],p=n[1];Dr(u,s,p)}}},Gr=function(o){if(o.length!==0){var r=c(xr(o),2),t=r[0],i=r[1];if(t.delete(i),t.size===0)Gr(o.slice(0,-1));else if(t.size===1){var u=c(t.entries().next().value,2),n=u[0],s=u[1];n!==g&&Dr(o.slice(0,-1),n,s)}}},Dr=function(o,r,t){if(o.length!==0){var i=c(xr(o),2),u=i[0],n=i[1];u.set(n+r,t),u.delete(n)}},xr=function(o){return o[o.length-1]},Fr,Mr="or",Q="and",z="and_not",jr=function(){function o(r){if(r?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=e(e(e({},O),r),{searchOptions:e(e({},b),r.searchOptions||{})}),this._index=new ur,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._averageFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return o.prototype.add=function(r){var t,i,u,n,s=this._options,p=s.extractField,l=s.tokenize,x=s.processTerm,w=s.fields,A=s.idField,S=p(r,A);if(S==null)throw new Error('MiniSearch: document does not have ID field "'.concat(A,'"'));var D=this.addDocumentId(S);this.saveStoredFields(D,r);try{for(var E=a(w),N=E.next();!N.done;N=E.next()){var k=N.value,I=p(r,k);if(I!=null){var T=l(I.toString(),k),j=this._fieldIds[k];this.addFieldLength(D,j,this.documentCount-1,T.length);try{for(var R=(u=void 0,a(T)),B=R.next();!B.done;B=R.next()){var V=B.value,X=x(V,k);X&&this.addTerm(j,D,X)}}catch(J){u={error:J}}finally{try{B&&!B.done&&(n=R.return)&&n.call(R)}finally{if(u)throw u.error}}}}}catch(J){t={error:J}}finally{try{N&&!N.done&&(i=E.return)&&i.call(E)}finally{if(t)throw t.error}}},o.prototype.addAll=function(r){var t,i;try{for(var u=a(r),n=u.next();!n.done;n=u.next()){var s=n.value;this.add(s)}}catch(p){t={error:p}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}},o.prototype.addAllAsync=function(r,t){var i=this;t===void 0&&(t={});var u=t.chunkSize,n=u===void 0?10:u,s={chunk:[],promise:Promise.resolve()},p=r.reduce(function(w,A,S){var D=w.chunk,E=w.promise;return D.push(A),(S+1)%n===0?{chunk:[],promise:E.then(function(){return new Promise(function(N){return setTimeout(N,0)})}).then(function(){return i.addAll(D)})}:{chunk:D,promise:E}},s),l=p.chunk,x=p.promise;return x.then(function(){return i.addAll(l)})},o.prototype.remove=function(r){var t,i,u,n,s,p,l=this._options,x=l.tokenize,w=l.processTerm,A=l.extractField,S=l.fields,D=l.idField,E=A(r,D);if(E==null)throw new Error('MiniSearch: document does not have ID field "'.concat(D,'"'));try{for(var N=a(this._documentIds),k=N.next();!k.done;k=N.next()){var I=c(k.value,2),T=I[0],j=I[1];if(E===j){try{for(var R=(u=void 0,a(S)),B=R.next();!B.done;B=R.next()){var V=B.value,X=A(r,V);if(X!=null){var J=x(X.toString(),V),or=this._fieldIds[V];try{for(var fr=(s=void 0,a(J)),rr=fr.next();!rr.done;rr=fr.next()){var dr=rr.value,cr=w(dr,V);cr&&this.removeTerm(or,T,cr)}}catch(hr){s={error:hr}}finally{try{rr&&!rr.done&&(p=fr.return)&&p.call(fr)}finally{if(s)throw s.error}}this.removeFieldLength(T,or,this.documentCount,J.length)}}}catch(hr){u={error:hr}}finally{try{B&&!B.done&&(n=R.return)&&n.call(R)}finally{if(u)throw u.error}}this._storedFields.delete(T),this._documentIds.delete(T),this._fieldLength.delete(T),this._documentCount-=1;return}}}catch(hr){t={error:hr}}finally{try{k&&!k.done&&(i=N.return)&&i.call(N)}finally{if(t)throw t.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(E,": it is not in the index"))},o.prototype.removeAll=function(r){var t,i;if(r)try{for(var u=a(r),n=u.next();!n.done;n=u.next()){var s=n.value;this.remove(s)}}catch(p){t={error:p}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new ur,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._averageFieldLength=[],this._storedFields=new Map,this._nextId=0}},o.prototype.search=function(r,t){var i,u;t===void 0&&(t={});var n=this.executeQuery(r,t),s=[];try{for(var p=a(n),l=p.next();!l.done;l=p.next()){var x=c(l.value,2),w=x[0],A=x[1],S=A.score,D=A.match,E=A.terms,N={id:this._documentIds.get(w),terms:y(E),score:S,match:D};Object.assign(N,this._storedFields.get(w)),(t.filter==null||t.filter(N))&&s.push(N)}}catch(k){i={error:k}}finally{try{l&&!l.done&&(u=p.return)&&u.call(p)}finally{if(i)throw i.error}}return s.sort(function(k,I){var T=k.score,j=I.score;return T<j?1:-1}),s},o.prototype.autoSuggest=function(r,t){var i,u,n,s;t===void 0&&(t={}),t=e(e({},P),t);var p=new Map;try{for(var l=a(this.search(r,t)),x=l.next();!x.done;x=l.next()){var w=x.value,A=w.score,S=w.terms,D=S.join(" "),E=p.get(D);E!=null?(E.score+=A,E.count+=1):p.set(D,{score:A,terms:S,count:1})}}catch(B){i={error:B}}finally{try{x&&!x.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}var N=[];try{for(var k=a(p),I=k.next();!I.done;I=k.next()){var T=c(I.value,2),E=T[0],j=T[1],A=j.score,S=j.terms,R=j.count;N.push({suggestion:E,terms:S,score:A/R})}}catch(B){n={error:B}}finally{try{I&&!I.done&&(s=k.return)&&s.call(k)}finally{if(n)throw n.error}}return N.sort(function(B,V){var X=B.score,J=V.score;return X<J?1:-1}),N},Object.defineProperty(o.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),o.loadJSON=function(r,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return o.loadJS(JSON.parse(r),t)},o.getDefault=function(r){if(O.hasOwnProperty(r))return Br(O,r);throw new Error('MiniSearch: unknown option "'.concat(r,'"'))},o.loadJS=function(r,t){var i,u,n,s,p=r.index,l=r.documentCount,x=r.nextId,w=r.documentIds,A=r.fieldIds,S=r.fieldLength,D=r.averageFieldLength,E=r.storedFields,N=r.serializationVersion;if(N!==1)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var k=new o(t);k._documentCount=l,k._nextId=x,k._documentIds=q(w),k._fieldIds=A,k._fieldLength=q(S),k._averageFieldLength=D,k._storedFields=q(E),k._index=new ur;try{for(var I=a(p),T=I.next();!T.done;T=I.next()){var j=c(T.value,2),R=j[0],B=j[1],V=new Map;try{for(var X=(n=void 0,a(Object.keys(B))),J=X.next();!J.done;J=X.next()){var or=J.value,fr=B[or],rr=fr.df,dr=fr.ds;V.set(parseInt(or,10),{df:rr,ds:q(dr)})}}catch(cr){n={error:cr}}finally{try{J&&!J.done&&(s=X.return)&&s.call(X)}finally{if(n)throw n.error}}k._index.set(R,V)}}catch(cr){i={error:cr}}finally{try{T&&!T.done&&(u=I.return)&&u.call(I)}finally{if(i)throw i.error}}return k},o.prototype.executeQuery=function(r,t){var i=this;if(t===void 0&&(t={}),typeof r=="string")return this.executeSearch(r,t);var u=r.queries.map(function(n){var s=e(e(e({},t),r),{queries:void 0});return i.executeQuery(n,s)});return this.combineResults(u,r.combineWith)},o.prototype.executeSearch=function(r,t){var i=this;t===void 0&&(t={});var u=this._options,n=u.tokenize,s=u.processTerm,p=u.searchOptions,l=e(e({tokenize:n,processTerm:s},p),t),x=l.tokenize,w=l.processTerm,A=x(r).map(function(E){return w(E)}).filter(function(E){return!!E}),S=A.map(M(l)),D=S.map(function(E){return i.executeQuerySpec(E,l)});return this.combineResults(D,l.combineWith)},o.prototype.executeQuerySpec=function(r,t){var i,u,n,s,p=e(e({},this._options.searchOptions),t),l=(p.fields||this._options.fields).reduce(function(hr,It){var ct;return e(e({},hr),(ct={},ct[It]=Br(hr,It)||1,ct))},p.boost||{}),x=p.boostDocument,w=p.weights,A=p.maxFuzzy,S=e(e({},b.weights),w),D=S.fuzzy,E=S.prefix,N=this.termResults(r.term,l,x,this._index.get(r.term)),k,I;if(r.prefix&&(k=this._index.atPrefix(r.term)),r.fuzzy){var T=r.fuzzy===!0?.2:r.fuzzy,j=T<1?Math.min(A,Math.round(r.term.length*T)):T;I=this._index.fuzzyGet(r.term,j)}if(k)try{for(var R=a(k),B=R.next();!B.done;B=R.next()){var V=c(B.value,2),X=V[0],J=V[1],or=X.length-r.term.length;if(!!or){I?.delete(X);var fr=.3*or/X.length;this.termResults(X,l,x,J,N,E,fr)}}}catch(hr){i={error:hr}}finally{try{B&&!B.done&&(u=R.return)&&u.call(R)}finally{if(i)throw i.error}}if(I)try{for(var rr=a(I.keys()),dr=rr.next();!dr.done;dr=rr.next()){var X=dr.value,cr=c(I.get(X),2),J=cr[0],or=cr[1];if(!!or){var fr=or/X.length;this.termResults(X,l,x,J,N,D,fr)}}}catch(hr){n={error:hr}}finally{try{dr&&!dr.done&&(s=rr.return)&&s.call(rr)}finally{if(n)throw n.error}}return N},o.prototype.combineResults=function(r,t){if(t===void 0&&(t=Mr),r.length===0)return new Map;var i=t.toLowerCase();return r.reduce(W[i])||new Map},o.prototype.toJSON=function(){var r,t,i,u,n=[];try{for(var s=a(this._index),p=s.next();!p.done;p=s.next()){var l=c(p.value,2),x=l[0],w=l[1],A={};try{for(var S=(i=void 0,a(w)),D=S.next();!D.done;D=S.next()){var E=c(D.value,2),N=E[0],k=E[1],I=k.df,T=k.ds;A[N]={df:I,ds:Object.fromEntries(T)}}}catch(j){i={error:j}}finally{try{D&&!D.done&&(u=S.return)&&u.call(S)}finally{if(i)throw i.error}}n.push([x,A])}}catch(j){r={error:j}}finally{try{p&&!p.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._averageFieldLength,storedFields:Object.fromEntries(this._storedFields),index:n,serializationVersion:1}},o.prototype.termResults=function(r,t,i,u,n,s,p){var l,x,w,A,S;if(n===void 0&&(n=new Map),s===void 0&&(s=1),p===void 0&&(p=0),u==null)return n;try{for(var D=a(Object.keys(t)),E=D.next();!E.done;E=D.next()){var N=E.value,k=t[N],I=this._fieldIds[N],T=u.get(I);if(T!=null)try{for(var j=(w=void 0,a(T.ds)),R=j.next();!R.done;R=j.next()){var B=c(R.value,2),V=B[0],X=B[1],J=i?i(this._documentIds.get(V),r):1;if(!!J){var or=this._fieldLength.get(V)[I]/this._averageFieldLength[I],fr=s*J*h(X,T.df,this._documentCount,or,k,p),rr=n.get(V);if(rr){rr.score+=fr;var dr=Br(rr.match,r);dr?dr.push(N):(rr.match[r]=[N],rr.terms.push(r))}else n.set(V,{score:fr,match:(S={},S[r]=[N],S),terms:[r]})}}}catch(cr){w={error:cr}}finally{try{R&&!R.done&&(A=j.return)&&A.call(j)}finally{if(w)throw w.error}}}}catch(cr){l={error:cr}}finally{try{E&&!E.done&&(x=D.return)&&x.call(D)}finally{if(l)throw l.error}}return n},o.prototype.addTerm=function(r,t,i){var u=this._index.fetch(i,H),n=u.get(r);if(n==null)n={df:1,ds:new Map},n.ds.set(t,1),u.set(r,n);else{var s=n.ds.get(t);s==null&&(n.df+=1),n.ds.set(t,(s||0)+1)}},o.prototype.removeTerm=function(r,t,i){if(!this._index.has(i)){this.warnDocumentChanged(t,r,i);return}var u=this._index.fetch(i,H),n=u.get(r);n==null||n.ds.get(t)==null?this.warnDocumentChanged(t,r,i):n.ds.get(t)<=1?n.df<=1?u.delete(r):(n.df-=1,n.ds.delete(t)):n.ds.set(t,n.ds.get(t)-1),this._index.get(i).size===0&&this._index.delete(i)},o.prototype.warnDocumentChanged=function(r,t,i){var u,n;if(!(console==null||console.warn==null))try{for(var s=a(Object.keys(this._fieldIds)),p=s.next();!p.done;p=s.next()){var l=p.value;if(this._fieldIds[l]===t){console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(r),' has changed before removal: term "').concat(i,'" was not present in field "').concat(l,'". Removing a document after it has changed can corrupt the index!'));return}}}catch(x){u={error:x}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(u)throw u.error}}},o.prototype.addDocumentId=function(r){var t=this._nextId;return this._documentIds.set(t,r),this._documentCount+=1,this._nextId+=1,t},o.prototype.addFields=function(r){for(var t=0;t<r.length;t++)this._fieldIds[r[t]]=t},o.prototype.addFieldLength=function(r,t,i,u){var n=this._fieldLength.get(r);n==null&&this._fieldLength.set(r,n=[]),n[t]=u;var s=this._averageFieldLength[t]||0,p=s*i+u;this._averageFieldLength[t]=p/(i+1)},o.prototype.removeFieldLength=function(r,t,i,u){var n=this._averageFieldLength[t]*i-u;this._averageFieldLength[t]=n/(i-1)},o.prototype.saveStoredFields=function(r,t){var i,u,n=this._options,s=n.storeFields,p=n.extractField;if(!(s==null||s.length===0)){var l=this._storedFields.get(r);l==null&&this._storedFields.set(r,l={});try{for(var x=a(s),w=x.next();!w.done;w=x.next()){var A=w.value,S=p(t,A);S!==void 0&&(l[A]=S)}}catch(D){i={error:D}}finally{try{w&&!w.done&&(u=x.return)&&u.call(x)}finally{if(i)throw i.error}}}},o}(),Br=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)?o[r]:void 0},W=(Fr={},Fr[Mr]=function(o,r){var t,i,u;try{for(var n=a(r.keys()),s=n.next();!s.done;s=n.next()){var p=s.value,l=o.get(p);if(l==null)o.set(p,r.get(p));else{var x=r.get(p),w=x.score,A=x.match,S=x.terms;l.score=(l.score+w)*1.5,l.match=Object.assign(l.match,A),(u=l.terms).push.apply(u,m([],c(S),!1))}}}catch(D){t={error:D}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return o},Fr[Q]=function(o,r){var t,i,u=new Map;try{for(var n=a(r.keys()),s=n.next();!s.done;s=n.next()){var p=s.value,l=o.get(p);if(l!=null){var x=r.get(p),w=x.score,A=x.match,S=x.terms;u.set(p,{score:l.score+w,match:Object.assign(l.match,A),terms:m(m([],c(l.terms),!1),c(S),!1)})}}}catch(D){t={error:D}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return u},Fr[z]=function(o,r){var t,i;try{for(var u=a(r.keys()),n=u.next();!n.done;n=u.next()){var s=n.value;o.delete(s)}}catch(p){t={error:p}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return o},Fr),v=function(o,r,t){return o*Math.log(t/r)},h=function(o,r,t,i,u,n){var s=u/(1+.333*u*n);return s*v(o,r,t)/i},M=function(o){return function(r,t,i){var u=typeof o.fuzzy=="function"?o.fuzzy(r,t,i):o.fuzzy||!1,n=typeof o.prefix=="function"?o.prefix(r,t,i):o.prefix===!0;return{term:r,fuzzy:u,prefix:n}}},y=function(o){return o.filter(function(r,t,i){return i.indexOf(r)===t})},O={idField:"id",extractField:function(o,r){return o[r]},tokenize:function(o,r){return o.split(Z)},processTerm:function(o,r){return o.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},b={combineWith:Mr,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},P={prefix:function(o,r,t){return r===t.length-1}},H=function(){return new Map},q=function(o){var r,t,i=new Map;try{for(var u=a(Object.keys(o)),n=u.next();!n.done;n=u.next()){var s=n.value;i.set(parseInt(s,10),o[s])}}catch(p){r={error:p}}finally{try{n&&!n.done&&(t=u.return)&&t.call(u)}finally{if(r)throw r.error}}return i},Z=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return jr})});var Bt=Nr((Zr,jt)=>{(function(e,a){typeof Zr=="object"&&typeof jt<"u"?a(Zr):typeof define=="function"&&define.amd?define(["exports"],a):a((e||self).logseqDateutils={})})(Zr,function(e){var a=function(m){return m+(m>0?["th","st","nd","rd"][m>3&&m<21||m%10>3?0:m%10]:"")},c=function(m){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][m.getDay()]};e.getDateForPage=function(m,d){var L=m.getFullYear(),C=m.toString().substring(4,7),g=m.getMonth()+1,Y=m.getDate(),$=m.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return"[["+C+" "+a(Y)+", "+L+"]]";if(d.includes("yyyy")&&(d.includes("MM")||d.includes("MMM"))&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var ar=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nr={yyyy:L,dd:("0"+Y).slice(-2),MM:("0"+g).slice(-2),MMMM:$,EEEE:ar[m.getDay()],EEE:ar[m.getDay()].substring(0,3),E:ar[m.getDay()].substring(0,1)};return"[["+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(tr){return nr[tr]})+"]]"}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var ur={yyyy:L,do:a(Y),MMMM:$};return"[["+d.replace(/yyyy|do|MMMM/gi,function(tr){return ur[tr]})+"]]"}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var vr={yyyy:L,dd:("0"+Y).slice(-2),MM:("0"+g).slice(-2)};return"[["+d.replace(/yyyy|dd|MM/gi,function(tr){return vr[tr]})+"]]"}return"[["+C+" "+a(Y)+", "+L+"]]"},e.getDateForPageWithoutBrackets=function(m,d){var L=m.getFullYear(),C=m.toString().substring(4,7),g=m.getMonth()+1,Y=m.getDate(),$=m.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return C+" "+a(Y)+", "+L;if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var ar=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nr={yyyy:L,dd:("0"+Y).slice(-2),MM:("0"+g).slice(-2),EEEE:ar[m.getDay()],EEE:ar[m.getDay()].substring(0,3),E:ar[m.getDay()].substring(0,1)};return""+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(tr){return nr[tr]})}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var ur={yyyy:L,do:a(Y),MMMM:$};return""+d.replace(/yyyy|do|MMMM/gi,function(tr){return ur[tr]})}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var vr={yyyy:L,dd:("0"+Y).slice(-2),MM:("0"+g).slice(-2)};return""+d.replace(/yyyy|dd|MM/gi,function(tr){return vr[tr]})}return d==="MMMM do, yyyy"?m.toLocaleString("default",{month:"long"})+" "+a(Y)+", "+L:d==="do MMM yyyy"?a(Y)+" "+C+" "+L:C+" "+a(Y)+", "+L},e.getDayInText=c,e.getScheduledDeadlineDateDay=function(m){return m.getFullYear()+"-"+(m.getMonth()+1)+"-"+m.getDate()+" "+c(m).substring(0,3)},e.getScheduledDeadlineDateDayTime=function(m){return m.getFullYear()+"-"+(m.getMonth()+1)+"-"+m.getDate()+" "+c(m).substring(0,3)+" "+m.toTimeString().substring(0,5)},e.getYYMMDDTHHMMFormat=function(m){return[m.getFullYear(),("0"+(m.getMonth()+1)).slice(-2),("0"+m.getDate()).slice(-2)].join("-")+"T"+m.toTimeString().substring(0,5)},e.getYYYMMDD=function(m){return[m.getFullYear(),("0"+(m.getMonth()+1)).slice(-2),("0"+m.getDate()).slice(-2)].join("")}})});var Pt=Nr(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.parseEDNString=Pr.EDNListParser=void 0;var yr;(function(e){e[e.idle=0]="idle",e[e.string=1]="string",e[e.escape=2]="escape",e[e.comment=3]="comment"})(yr||(yr={}));var sr;(function(e){e[e.vector=0]="vector",e[e.list=1]="list",e[e.map=2]="map",e[e.set=3]="set",e[e.tag=4]="tag"})(sr||(sr={}));var Oe={t:"	",r:"\r",n:`
`,"\\":"\\",'"':'"'},be=[","," ","	",`
`,"\r"],ke=/^[-+]?(0|[1-9][0-9]*)$/,We=/^[-+]?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?(0|[1-9][0-9]*))?M?$/,Le={inst:e=>{if(typeof e!="string")throw new Error("#inst value must be a string");return new Date(e)}},rt=class{constructor({mapAs:a="doubleArray",setAs:c="object",keywordAs:m="object",charAs:d="object",listAs:L="object",tagHandlers:C={}}={}){this.stack=[],this.mode=yr.idle,this.state="",this.started=!1,this.done=!1,this.mapAs=a,this.setAs=c,this.keywordAs=m,this.charAs=d,this.listAs=L,this.tagHandlers={...Le,...C}}updateStack(){if(this.stack.length===0||this.result===void 0)return;let[a,c]=this.stack[this.stack.length-1];if(a===sr.vector)c.push(this.result);else if(a===sr.list)c.push(this.result);else if(a===sr.set)c.push(this.result);else if(a===sr.map)c[1].length>0?c[0].push([c[1].pop(),this.result]):c[1].push(this.result);else if(a===sr.tag){if(this.stack.pop(),c==="_")this.result=void 0;else{let m=this.tagHandlers[c];m?this.result=m(this.result):this.result={tag:c,val:this.result}}this.updateStack();return}this.result=void 0}match(){if(this.state==="nil")this.result=null;else if(this.state==="true")this.result=!0;else if(this.state==="false")this.result=!1;else if(this.state[0]===":")this.result=this.keywordAs==="string"?this.state.substr(1):{key:this.state.substr(1)};else if(this.state[0]==="#")this.stack.push([sr.tag,this.state.substr(1)]),this.result=void 0;else if(ke.test(this.state))this.result=parseInt(this.state,10);else if(We.test(this.state))this.result=parseFloat(this.state);else if(this.state[0]==="\\"){let a;this.state==="\\space"?a=" ":this.state==="\\newline"?a=`
`:this.state==="\\return"?a="\r":this.state==="\\tab"?a="	":this.state==="\\\\"?a="\\":a=this.state.substr(1),this.charAs==="string"?this.result=a:this.result={char:a}}else this.state!==""&&(this.result={sym:this.state});this.state=""}next(a){let c=[];for(let m=0;m<a.length;m++){this.stack.length===0&&this.result!==void 0&&(c.push(this.result),this.result=void 0);let d=a[m];if(this.mode===yr.idle){if(d==='"'){this.match(),this.updateStack(),this.mode=yr.string,this.state="";continue}if(d===";"){this.mode=yr.comment;continue}if(be.includes(d)){this.match(),this.updateStack();continue}if(d==="}"){if(this.match(),this.updateStack(),this.stack.length!==0){let[C,g]=this.stack.pop();C===sr.map?this.mapAs==="object"?this.result=g[0].reduce((Y,[$,ar])=>({...Y,[$]:ar}),{}):this.mapAs==="map"?this.result=new Map(g[0]):this.result={map:g[0]}:this.setAs==="array"?this.result=g:this.setAs==="set"?this.result=new Set(g):this.result={set:g}}this.updateStack();continue}if(d==="]"){this.match(),this.updateStack();let[C,g]=this.stack.pop();this.result=g,this.updateStack();continue}if(d===")"){if(this.match(),this.updateStack(),this.stack.length===0)return this.result!==void 0&&c.push(this.result),this.done=!0,c;let[C,g]=this.stack.pop();this.listAs==="array"?this.result=g:this.result={list:g},this.updateStack();continue}if(d==="["){this.match(),this.updateStack(),this.stack.push([sr.vector,[]]);continue}else if(d==="("){if(!this.started){this.started=!0;continue}this.match(),this.updateStack(),this.stack.push([sr.list,[]]);continue}let L=this.state+d;if(L==="#_"){this.stack.push([sr.tag,d]),this.result=void 0,this.state="";continue}if(L.endsWith("#{")){this.state=this.state.slice(0,-1),this.match(),this.updateStack(),this.stack.push([sr.set,[]]),this.state="";continue}if(d==="{"){this.match(),this.updateStack(),this.stack.push([sr.map,[[],[]]]),this.state="";continue}this.state+=d;continue}else if(this.mode===yr.string){if(d==="\\"){this.stack.push([this.mode,this.state]),this.mode=yr.escape,this.state="";continue}if(d==='"'){this.mode=yr.idle,this.result=this.state,this.updateStack(),this.state="";continue}this.state+=d}else if(this.mode===yr.escape){let L=Oe[d],[C,g]=this.stack.pop();this.mode=C,this.state=g+L}else this.mode===yr.comment&&d===`
`&&(this.mode=yr.idle)}return c}isDone(){return this.done}};Pr.EDNListParser=rt;Pr.parseEDNString=(e,a)=>{let c=new rt(a),[m]=c.next("("+e+")");return m===void 0?null:m}});var zt=Nr(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.toEDNStringFromSimpleObject=U.toEDNString=U.toSymbol=U.toKeyword=U.tagValue=void 0;var Ne=e=>e.key!==void 0,Ie=e=>e.sym!==void 0,Ce=e=>e.map!==void 0,Te=e=>e.set!==void 0,je=e=>e.list!==void 0,Be=e=>e.tag!==void 0,Pe=e=>e.char!==void 0;U.tagValue=(e,a)=>({tag:e,val:a});U.toKeyword=e=>({key:e});U.toSymbol=e=>({sym:e});U.toEDNString=e=>{if(typeof e=="string")return JSON.stringify(e);if(Array.isArray(e))return`[${e.map(U.toEDNString).join(" ")}]`;if(typeof e=="number")return e.toString();if(typeof e=="boolean")return JSON.stringify(e);if(e===null)return"nil";if(e instanceof Date)return`#inst "${e.toISOString()}"`;if(typeof e=="bigint")return`${e}N`;if(e instanceof Map)return`{${[...e].map(([a,c])=>`${U.toEDNString(a)} ${U.toEDNString(c)}`).join(" ")}}`;if(e instanceof Set)return`#{${[...e].map(U.toEDNString).join(" ")}}`;if(Ce(e))return`{${e.map.map(([a,c])=>`${U.toEDNString(a)} ${U.toEDNString(c)}`).join(" ")}}`;if(Te(e))return`#{${e.set.map(U.toEDNString).join(" ")}}`;if(Ne(e))return`:${e.key}`;if(Ie(e))return e.sym;if(je(e))return`(${e.list.map(U.toEDNString).join(" ")})`;if(Be(e))return`#${e.tag} ${U.toEDNString(e.val)}`;if(Pe(e))return`\\${e.char}`;throw new TypeError(`Unknown type: ${JSON.stringify(e)}`)};U.toEDNStringFromSimpleObject=(e,a={keysAs:"keyword"})=>{if(typeof e=="string")return JSON.stringify(e);if(Array.isArray(e))return`[${e.map(c=>U.toEDNStringFromSimpleObject(c,a)).join(" ")}]`;if(typeof e=="number")return e.toString();if(typeof e=="boolean")return JSON.stringify(e);if(e===null)return"nil";if(e instanceof Date)return`#inst "${e.toISOString()}"`;if(typeof e=="bigint")return`${e}N`;if(e instanceof Map)return`{${[...e].map(([c,m])=>`${U.toEDNStringFromSimpleObject(c,a)} ${U.toEDNStringFromSimpleObject(m,a)}`).join(" ")}}`;if(e instanceof Set)return`#{${[...e].map(c=>U.toEDNStringFromSimpleObject(c,a)).join(" ")}}`;if(typeof e=="object")return`{${Object.entries(e).map(([c,m])=>`${a.keysAs==="string"?JSON.stringify(c):`:${c}`} ${U.toEDNStringFromSimpleObject(m,a)}`).join(" ")}}`;throw new TypeError(`Unknown type: ${JSON.stringify(e)}`)}});var $t=Nr(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var ze=Pt();Object.defineProperty(Or,"parseEDNString",{enumerable:!0,get:function(){return ze.parseEDNString}});var Xr=zt();Object.defineProperty(Or,"toEDNString",{enumerable:!0,get:function(){return Xr.toEDNString}});Object.defineProperty(Or,"toEDNStringFromSimpleObject",{enumerable:!0,get:function(){return Xr.toEDNStringFromSimpleObject}});Object.defineProperty(Or,"tagValue",{enumerable:!0,get:function(){return Xr.tagValue}});Object.defineProperty(Or,"toKeyword",{enumerable:!0,get:function(){return Xr.toKeyword}});Object.defineProperty(Or,"toSymbol",{enumerable:!0,get:function(){return Xr.toSymbol}})});var fe=Nr((kt,Wt)=>{(function(e,a){typeof kt=="object"&&typeof Wt<"u"?Wt.exports=a():typeof define=="function"&&define.amd?define(a):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=a()})(kt,function(){"use strict";var e=1e3,a=6e4,c=36e5,m="millisecond",d="second",L="minute",C="hour",g="day",Y="week",$="month",ar="quarter",nr="year",ur="date",vr="Invalid Date",tr=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Lr=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,lt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Ur=function(W,v,h){var M=String(W);return!M||M.length>=v?W:""+Array(v+1-M.length).join(h)+W},Gr={s:Ur,z:function(W){var v=-W.utcOffset(),h=Math.abs(v),M=Math.floor(h/60),y=h%60;return(v<=0?"+":"-")+Ur(M,2,"0")+":"+Ur(y,2,"0")},m:function W(v,h){if(v.date()<h.date())return-W(h,v);var M=12*(h.year()-v.year())+(h.month()-v.month()),y=v.clone().add(M,$),O=h-y<0,b=v.clone().add(M+(O?-1:1),$);return+(-(M+(h-y)/(O?y-b:b-y))||0)},a:function(W){return W<0?Math.ceil(W)||0:Math.floor(W)},p:function(W){return{M:$,y:nr,w:Y,d:g,D:ur,h:C,m:L,s:d,ms:m,Q:ar}[W]||String(W||"").toLowerCase().replace(/s$/,"")},u:function(W){return W===void 0}},Dr="en",xr={};xr[Dr]=lt;var Fr=function(W){return W instanceof jr},Mr=function W(v,h,M){var y;if(!v)return Dr;if(typeof v=="string"){var O=v.toLowerCase();xr[O]&&(y=O),h&&(xr[O]=h,y=O);var b=v.split("-");if(!y&&b.length>1)return W(b[0])}else{var P=v.name;xr[P]=v,y=P}return!M&&y&&(Dr=y),y||!M&&Dr},Q=function(W,v){if(Fr(W))return W.clone();var h=typeof v=="object"?v:{};return h.date=W,h.args=arguments,new jr(h)},z=Gr;z.l=Mr,z.i=Fr,z.w=function(W,v){return Q(W,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var jr=function(){function W(h){this.$L=Mr(h.locale,null,!0),this.parse(h)}var v=W.prototype;return v.parse=function(h){this.$d=function(M){var y=M.date,O=M.utc;if(y===null)return new Date(NaN);if(z.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var b=y.match(tr);if(b){var P=b[2]-1||0,H=(b[7]||"0").substring(0,3);return O?new Date(Date.UTC(b[1],P,b[3]||1,b[4]||0,b[5]||0,b[6]||0,H)):new Date(b[1],P,b[3]||1,b[4]||0,b[5]||0,b[6]||0,H)}}return new Date(y)}(h),this.$x=h.x||{},this.init()},v.init=function(){var h=this.$d;this.$y=h.getFullYear(),this.$M=h.getMonth(),this.$D=h.getDate(),this.$W=h.getDay(),this.$H=h.getHours(),this.$m=h.getMinutes(),this.$s=h.getSeconds(),this.$ms=h.getMilliseconds()},v.$utils=function(){return z},v.isValid=function(){return this.$d.toString()!==vr},v.isSame=function(h,M){var y=Q(h);return this.startOf(M)<=y&&y<=this.endOf(M)},v.isAfter=function(h,M){return Q(h)<this.startOf(M)},v.isBefore=function(h,M){return this.endOf(M)<Q(h)},v.$g=function(h,M,y){return z.u(h)?this[M]:this.set(y,h)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(h,M){var y=this,O=!!z.u(M)||M,b=z.p(h),P=function(u,n){var s=z.w(y.$u?Date.UTC(y.$y,n,u):new Date(y.$y,n,u),y);return O?s:s.endOf(g)},H=function(u,n){return z.w(y.toDate()[u].apply(y.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(n)),y)},q=this.$W,Z=this.$M,o=this.$D,r="set"+(this.$u?"UTC":"");switch(b){case nr:return O?P(1,0):P(31,11);case $:return O?P(1,Z):P(0,Z+1);case Y:var t=this.$locale().weekStart||0,i=(q<t?q+7:q)-t;return P(O?o-i:o+(6-i),Z);case g:case ur:return H(r+"Hours",0);case C:return H(r+"Minutes",1);case L:return H(r+"Seconds",2);case d:return H(r+"Milliseconds",3);default:return this.clone()}},v.endOf=function(h){return this.startOf(h,!1)},v.$set=function(h,M){var y,O=z.p(h),b="set"+(this.$u?"UTC":""),P=(y={},y[g]=b+"Date",y[ur]=b+"Date",y[$]=b+"Month",y[nr]=b+"FullYear",y[C]=b+"Hours",y[L]=b+"Minutes",y[d]=b+"Seconds",y[m]=b+"Milliseconds",y)[O],H=O===g?this.$D+(M-this.$W):M;if(O===$||O===nr){var q=this.clone().set(ur,1);q.$d[P](H),q.init(),this.$d=q.set(ur,Math.min(this.$D,q.daysInMonth())).$d}else P&&this.$d[P](H);return this.init(),this},v.set=function(h,M){return this.clone().$set(h,M)},v.get=function(h){return this[z.p(h)]()},v.add=function(h,M){var y,O=this;h=Number(h);var b=z.p(M),P=function(Z){var o=Q(O);return z.w(o.date(o.date()+Math.round(Z*h)),O)};if(b===$)return this.set($,this.$M+h);if(b===nr)return this.set(nr,this.$y+h);if(b===g)return P(1);if(b===Y)return P(7);var H=(y={},y[L]=a,y[C]=c,y[d]=e,y)[b]||1,q=this.$d.getTime()+h*H;return z.w(q,this)},v.subtract=function(h,M){return this.add(-1*h,M)},v.format=function(h){var M=this,y=this.$locale();if(!this.isValid())return y.invalidDate||vr;var O=h||"YYYY-MM-DDTHH:mm:ssZ",b=z.z(this),P=this.$H,H=this.$m,q=this.$M,Z=y.weekdays,o=y.months,r=function(n,s,p,l){return n&&(n[s]||n(M,O))||p[s].substr(0,l)},t=function(n){return z.s(P%12||12,n,"0")},i=y.meridiem||function(n,s,p){var l=n<12?"AM":"PM";return p?l.toLowerCase():l},u={YY:String(this.$y).slice(-2),YYYY:this.$y,M:q+1,MM:z.s(q+1,2,"0"),MMM:r(y.monthsShort,q,o,3),MMMM:r(o,q),D:this.$D,DD:z.s(this.$D,2,"0"),d:String(this.$W),dd:r(y.weekdaysMin,this.$W,Z,2),ddd:r(y.weekdaysShort,this.$W,Z,3),dddd:Z[this.$W],H:String(P),HH:z.s(P,2,"0"),h:t(1),hh:t(2),a:i(P,H,!0),A:i(P,H,!1),m:String(H),mm:z.s(H,2,"0"),s:String(this.$s),ss:z.s(this.$s,2,"0"),SSS:z.s(this.$ms,3,"0"),Z:b};return O.replace(Lr,function(n,s){return s||u[n]||b.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(h,M,y){var O,b=z.p(M),P=Q(h),H=(P.utcOffset()-this.utcOffset())*a,q=this-P,Z=z.m(this,P);return Z=(O={},O[nr]=Z/12,O[$]=Z,O[ar]=Z/3,O[Y]=(q-H)/6048e5,O[g]=(q-H)/864e5,O[C]=q/c,O[L]=q/a,O[d]=q/e,O)[b]||q,y?Z:z.a(Z)},v.daysInMonth=function(){return this.endOf($).$D},v.$locale=function(){return xr[this.$L]},v.locale=function(h,M){if(!h)return this.$L;var y=this.clone(),O=Mr(h,M,!0);return O&&(y.$L=O),y},v.clone=function(){return z.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},W}(),Br=jr.prototype;return Q.prototype=Br,[["$ms",m],["$s",d],["$m",L],["$H",C],["$W",g],["$M",$],["$y",nr],["$D",ur]].forEach(function(W){Br[W[1]]=function(v){return this.$g(v,W[0],W[1])}}),Q.extend=function(W,v){return W.$i||(W(v,jr,Q),W.$i=!0),Q},Q.locale=Mr,Q.isDayjs=Fr,Q.unix=function(W){return Q(1e3*W)},Q.en=xr[Dr],Q.Ls=xr,Q.p={},Q})});var le=Nr((zb,pe)=>{"use strict";var Kn=require("os"),se=Kn.homedir();pe.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return se?e.replace(/^~(?=$|\/|\\)/,se):e}});var no={};De(no,{default:()=>_e});module.exports=Me(no);var mr=require("@raycast/api"),Tr=require("react"),xe=Ir(Tt()),ge=require("@raycast/api");var Rr=require("@raycast/api"),Vn=Ir(Bt()),ce=Ir($t()),Lt=Ir(require("path"));var ir=Array.isArray||function(a){return a!=null&&a.length>=0&&Object.prototype.toString.call(a)==="[object Array]"};var kr=Number.isInteger||function(a){return a<<0===a};var Hr=function(a){return(a<10?"0":"")+a},qs=typeof Date.prototype.toISOString=="function"?function(a){return a.toISOString()}:function(a){return a.getUTCFullYear()+"-"+Hr(a.getUTCMonth()+1)+"-"+Hr(a.getUTCDate())+"T"+Hr(a.getUTCHours())+":"+Hr(a.getUTCMinutes())+":"+Hr(a.getUTCSeconds())+"."+(a.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};var u1=typeof String.prototype.trim=="function";var Gn=Ir(fe()),pt=Ir(require("fs")),me=Ir(le());var Qn=e=>pt.default.promises.lstat(e).then(a=>{if(!a.isDirectory())throw`Folder does not exist: ${e}`}).catch(a=>{throw a.code==="ENOENT"?`Folder does not exist: ${e}`:"Error"}),qr=()=>(0,me.default)((0,Rr.getPreferenceValues)().graphPath),de=()=>Qn(qr()),Zn=()=>{let e=Lt.default.join(qr(),"/logseq/config.edn");return pt.default.promises.readFile(e,{encoding:"utf8"}).then(a=>(0,ce.parseEDNString)(a.toString(),{mapAs:"object",keywordAs:"string"}))},he=()=>Zn().then(e=>e["preferred-format"]||"md");var ye=()=>{(0,Rr.showToast)({style:Rr.Toast.Style.Failure,title:"Logseq graph path is invalid",message:"Update the path and try again."})};var ve=async e=>pt.default.promises.readdir(e).then(a=>a.map(c=>Lt.default.join(e,c))),Vr=e=>{let a=e.split("/");return a[a.length-1]},Nt=e=>{let a=qr().split("/")[qr().split("/").length-1];return encodeURI(`logseq://graph/${a}?file=${e}`)};var Cr=require("react/jsx-runtime");function _e(){let{state:e,search:a}=to();return(0,Tr.useEffect)(()=>{de().catch(c=>{throw ye(),"Folder Does not Exist"})},[a]),(0,Cr.jsx)(mr.List,{isLoading:e.isLoading,onSearchTextChange:a,searchBarPlaceholder:"Search Logseq Database...",throttle:!0,children:(0,Cr.jsx)(mr.List.Section,{title:"Results",subtitle:e.results.length+"",children:e.results.map(c=>(0,Cr.jsx)(ro,{searchResult:c},c.name))})})}function ro({searchResult:e}){return console.log(e.url),(0,Cr.jsx)(mr.List.Item,{title:e.name,subtitle:e.description,actions:(0,Cr.jsx)(mr.ActionPanel,{children:(0,Cr.jsx)(mr.ActionPanel.Section,{children:(0,Cr.jsx)(mr.Action.OpenInBrowser,{title:"Open in Logseq",url:e.url})})})})}function to(){let[e,a]=(0,Tr.useState)({results:[],isLoading:!0}),c=(0,Tr.useCallback)(async function(d){a(L=>({...L,isLoading:!0}));try{let L=await eo(d);a(C=>({...C,results:L,isLoading:!1}))}catch(L){a(C=>({...C,isLoading:!1})),console.error("search error",L),(0,mr.showToast)({style:mr.Toast.Style.Failure,title:"Could not perform search",message:String(L)})}},[a]);return(0,Tr.useEffect)(()=>{c("")},[]),{state:e,search:c}}async function eo(e){let a=await he().then(m=>`.${m}`),c=[];return await ve(qr()+"/pages").then(m=>{if((0,ge.getPreferenceValues)().smartSearch==!0&&e.length>0){let d=[];m.forEach(g=>{g.endsWith(a)&&d.push({name:Vr(g).replace(a,""),description:Vr(g),url:Nt(g)})});let L=new xe.default({fields:["name"],storeFields:["name","url"],idField:"name"});L.addAll(d);let C=L.search(e);for(let g in C)c.push({name:C[g].name,description:C[g].name+a,url:C[g].url})}else m.forEach(d=>{d.endsWith(a)&&d.toLowerCase().includes(e.toLowerCase())&&c.push({name:Vr(d).replace(a,""),description:Vr(d),url:Nt(d)})})}),c}0&&(module.exports={});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
