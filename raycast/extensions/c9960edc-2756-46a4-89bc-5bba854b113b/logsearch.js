"use strict";var oe=Object.create;var bt=Object.defineProperty;var ue=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var gt=(r,o)=>()=>(o||r((o={exports:{}}).exports,o),o.exports),ce=(r,o)=>{for(var f in o)bt(r,f,{get:o[f],enumerable:!0})},Wt=(r,o,f,c)=>{if(o&&typeof o=="object"||typeof o=="function")for(let d of le(o))!fe.call(r,d)&&d!==f&&bt(r,d,{get:()=>o[d],enumerable:!(c=ue(o,d))||c.enumerable});return r};var vt=(r,o,f)=>(f=r!=null?oe(he(r)):{},Wt(o||!r||!r.__esModule?bt(f,"default",{value:r,enumerable:!0}):f,r)),de=r=>Wt(bt({},"__esModule",{value:!0}),r);var Ht=gt((Nt,kt)=>{(function(r,o){typeof Nt=="object"&&typeof kt<"u"?kt.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self,r.MiniSearch=o())})(Nt,function(){"use strict";var r=function(){return r=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},r.apply(this,arguments)};function o(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],s=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var s=e.call(i),a,n=[],u;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)n.push(a.value)}catch(l){u={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(u)throw u.error}}return n}function c(i,t,e){if(e||arguments.length===2)for(var s=0,a=t.length,n;s<a;s++)(n||!(s in t))&&(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return i.concat(n||Array.prototype.slice.call(t))}var d="ENTRIES",C="KEYS",z="VALUES",m="",J=function(){function i(t,e){var s=t._tree,a=Array.from(s.keys());this.set=t,this._type=e,this._path=a.length>0?[{node:s,keys:a}]:[]}return i.prototype.next=function(){var t=this.dive();return this.backtrack(),t},i.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var t=B(this._path),e=t.node,s=t.keys;return B(s)===m?{done:!1,value:this.result()}:(this._path.push({node:e.get(B(s)),keys:Array.from(e.get(B(s)).keys())}),this.dive())},i.prototype.backtrack=function(){this._path.length!==0&&(B(this._path).keys.pop(),!(B(this._path).keys.length>0)&&(this._path.pop(),this.backtrack()))},i.prototype.key=function(){return this.set._prefix+this._path.map(function(t){var e=t.keys;return B(e)}).filter(function(t){return t!==m}).join("")},i.prototype.value=function(){return B(this._path).node.get(m)},i.prototype.result=function(){return this._type===z?this.value():this._type===C?this.key():[this.key(),this.value()]},i.prototype[Symbol.iterator]=function(){return this},i}(),B=function(i){return i[i.length-1]},X=function(i,t,e){var s=new Map;if(t===void 0)return s;for(var a=t.length+1,n=a+e,u=new Uint8Array(n*a),l=0;l<a;l++)u[l]=l;return Z(i,t,e,s,u,a,a,""),s},Z=function(i,t,e,s,a,n,u,l){var h,v;try{t:for(var S=o(i.keys()),w=S.next();!w.done;w=S.next()){var F=w.value;if(F===m){var E=a[n-1];E<=e&&s.set(l,[i.get(F),E])}else{for(var M=0;M<F.length;M++){for(var O=F[M],A=n+u*M,L=A-u,T=a[A]=a[L]+1,N=0;N<u-1;N++){var Y=O!==t[N],k=a[L+N]+ +Y,V=a[L+N+1]+1,H=a[A+N]+1,U=a[A+N+1]=Math.min(k,V,H);U<T&&(T=U)}if(T>e)continue t}Z(i.get(F),t,e,s,a,n+u*F.length,u,l+F)}}}catch(q){h={error:q}}finally{try{w&&!w.done&&(v=S.return)&&v.call(S)}finally{if(h)throw h.error}}},tt=function(){function i(t,e){t===void 0&&(t=new Map),e===void 0&&(e=""),this._size=void 0,this._tree=t,this._prefix=e}return i.prototype.atPrefix=function(t){var e,s;if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var a=f(ut(this._tree,t.slice(this._prefix.length)),2),n=a[0],u=a[1];if(n===void 0){var l=f(lt(u),2),h=l[0],v=l[1];try{for(var S=o(h.keys()),w=S.next();!w.done;w=S.next()){var F=w.value;if(F!==m&&F.startsWith(v)){var E=new Map;return E.set(F.slice(v.length),h.get(F)),new i(E,t)}}}catch(M){e={error:M}}finally{try{w&&!w.done&&(s=S.return)&&s.call(S)}finally{if(e)throw e.error}}}return new i(n,t)},i.prototype.clear=function(){this._size=void 0,this._tree.clear()},i.prototype.delete=function(t){return this._size=void 0,Dt(this._tree,t)},i.prototype.entries=function(){return new J(this,d)},i.prototype.forEach=function(t){var e,s;try{for(var a=o(this),n=a.next();!n.done;n=a.next()){var u=f(n.value,2),l=u[0],h=u[1];t(l,h,this)}}catch(v){e={error:v}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}},i.prototype.fuzzyGet=function(t,e){return X(this._tree,t,e)},i.prototype.get=function(t){var e=_(this._tree,t);return e!==void 0?e.get(m):void 0},i.prototype.has=function(t){var e=_(this._tree,t);return e!==void 0&&e.has(m)},i.prototype.keys=function(){return new J(this,C)},i.prototype.set=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var s=pt(this._tree,t);return s.set(m,e),this},Object.defineProperty(i.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var t=this.entries();!t.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),i.prototype.update=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var s=pt(this._tree,t);return s.set(m,e(s.get(m))),this},i.prototype.fetch=function(t,e){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;var s=pt(this._tree,t),a=s.get(m);return a===void 0&&s.set(m,a=e()),a},i.prototype.values=function(){return new J(this,z)},i.prototype[Symbol.iterator]=function(){return this.entries()},i.from=function(t){var e,s,a=new i;try{for(var n=o(t),u=n.next();!u.done;u=n.next()){var l=f(u.value,2),h=l[0],v=l[1];a.set(h,v)}}catch(S){e={error:S}}finally{try{u&&!u.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return a},i.fromObject=function(t){return i.from(Object.entries(t))},i}(),ut=function(i,t,e){var s,a;if(e===void 0&&(e=[]),t.length===0||i==null)return[i,e];try{for(var n=o(i.keys()),u=n.next();!u.done;u=n.next()){var l=u.value;if(l!==m&&t.startsWith(l))return e.push([i,l]),ut(i.get(l),t.slice(l.length),e)}}catch(h){s={error:h}}finally{try{u&&!u.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return e.push([i,t]),ut(void 0,"",e)},_=function(i,t){var e,s;if(t.length===0||i==null)return i;try{for(var a=o(i.keys()),n=a.next();!n.done;n=a.next()){var u=n.value;if(u!==m&&t.startsWith(u))return _(i.get(u),t.slice(u.length))}}catch(l){e={error:l}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}},pt=function(i,t){var e,s,a,n;if(t.length===0||i==null)return i;try{for(var u=o(i.keys()),l=u.next();!l.done;l=u.next()){var h=l.value;if(h!==m&&t.startsWith(h))return pt(i.get(h),t.slice(h.length))}}catch(M){e={error:M}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(e)throw e.error}}try{for(var v=o(i.keys()),S=v.next();!S.done;S=v.next()){var h=S.value;if(h!==m&&h.startsWith(t[0])){var w=zt(t,h),F=new Map;return F.set(h.slice(w),i.get(h)),i.set(t.slice(0,w),F),i.delete(h),pt(F,t.slice(w))}}}catch(M){a={error:M}}finally{try{S&&!S.done&&(n=v.return)&&n.call(v)}finally{if(a)throw a.error}}var E=new Map;return i.set(t,E),E},zt=function(i,t){for(var e=Math.min(i.length,t.length),s=0;s<e;s++)if(i[s]!==t[s])return s;return e},Dt=function(i,t){var e=f(ut(i,t),2),s=e[0],a=e[1];if(s!==void 0){if(s.delete(m),s.size===0)At(a);else if(s.size===1){var n=f(s.entries().next().value,2),u=n[0],l=n[1];ft(a,u,l)}}},At=function(i){if(i.length!==0){var t=f(lt(i),2),e=t[0],s=t[1];if(e.delete(s),e.size===0)At(i.slice(0,-1));else if(e.size===1){var a=f(e.entries().next().value,2),n=a[0],u=a[1];n!==m&&ft(i.slice(0,-1),n,u)}}},ft=function(i,t,e){if(i.length!==0){var s=f(lt(i),2),a=s[0],n=s[1];a.set(n+t,e),a.delete(n)}},lt=function(i){return i[i.length-1]},ht,ct="or",G="and",P="and_not",St=function(){function i(t){if(t?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');this._options=r(r(r({},$),t),{searchOptions:r(r({},x),t.searchOptions||{})}),this._index=new tt,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._averageFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return i.prototype.add=function(t){var e,s,a,n,u=this._options,l=u.extractField,h=u.tokenize,v=u.processTerm,S=u.fields,w=u.idField,F=l(t,w);if(F==null)throw new Error('MiniSearch: document does not have ID field "'.concat(w,'"'));var E=this.addDocumentId(F);this.saveStoredFields(E,t);try{for(var M=o(S),O=M.next();!O.done;O=M.next()){var A=O.value,L=l(t,A);if(L!=null){var T=h(L.toString(),A),N=this._fieldIds[A];this.addFieldLength(E,N,this.documentCount-1,T.length);try{for(var Y=(a=void 0,o(T)),k=Y.next();!k.done;k=Y.next()){var V=k.value,H=v(V,A);H&&this.addTerm(N,E,H)}}catch(U){a={error:U}}finally{try{k&&!k.done&&(n=Y.return)&&n.call(Y)}finally{if(a)throw a.error}}}}}catch(U){e={error:U}}finally{try{O&&!O.done&&(s=M.return)&&s.call(M)}finally{if(e)throw e.error}}},i.prototype.addAll=function(t){var e,s;try{for(var a=o(t),n=a.next();!n.done;n=a.next()){var u=n.value;this.add(u)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}},i.prototype.addAllAsync=function(t,e){var s=this;e===void 0&&(e={});var a=e.chunkSize,n=a===void 0?10:a,u={chunk:[],promise:Promise.resolve()},l=t.reduce(function(S,w,F){var E=S.chunk,M=S.promise;return E.push(w),(F+1)%n===0?{chunk:[],promise:M.then(function(){return new Promise(function(O){return setTimeout(O,0)})}).then(function(){return s.addAll(E)})}:{chunk:E,promise:M}},u),h=l.chunk,v=l.promise;return v.then(function(){return s.addAll(h)})},i.prototype.remove=function(t){var e,s,a,n,u,l,h=this._options,v=h.tokenize,S=h.processTerm,w=h.extractField,F=h.fields,E=h.idField,M=w(t,E);if(M==null)throw new Error('MiniSearch: document does not have ID field "'.concat(E,'"'));try{for(var O=o(this._documentIds),A=O.next();!A.done;A=O.next()){var L=f(A.value,2),T=L[0],N=L[1];if(M===N){try{for(var Y=(a=void 0,o(F)),k=Y.next();!k.done;k=Y.next()){var V=k.value,H=w(t,V);if(H!=null){var U=v(H.toString(),V),q=this._fieldIds[V];try{for(var et=(u=void 0,o(U)),Q=et.next();!Q.done;Q=et.next()){var st=Q.value,nt=S(st,V);nt&&this.removeTerm(q,T,nt)}}catch(at){u={error:at}}finally{try{Q&&!Q.done&&(l=et.return)&&l.call(et)}finally{if(u)throw u.error}}this.removeFieldLength(T,q,this.documentCount,U.length)}}}catch(at){a={error:at}}finally{try{k&&!k.done&&(n=Y.return)&&n.call(Y)}finally{if(a)throw a.error}}this._storedFields.delete(T),this._documentIds.delete(T),this._fieldLength.delete(T),this._documentCount-=1;return}}}catch(at){e={error:at}}finally{try{A&&!A.done&&(s=O.return)&&s.call(O)}finally{if(e)throw e.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(M,": it is not in the index"))},i.prototype.removeAll=function(t){var e,s;if(t)try{for(var a=o(t),n=a.next();!n.done;n=a.next()){var u=n.value;this.remove(u)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new tt,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._averageFieldLength=[],this._storedFields=new Map,this._nextId=0}},i.prototype.search=function(t,e){var s,a;e===void 0&&(e={});var n=this.executeQuery(t,e),u=[];try{for(var l=o(n),h=l.next();!h.done;h=l.next()){var v=f(h.value,2),S=v[0],w=v[1],F=w.score,E=w.match,M=w.terms,O={id:this._documentIds.get(S),terms:p(M),score:F,match:E};Object.assign(O,this._storedFields.get(S)),(e.filter==null||e.filter(O))&&u.push(O)}}catch(A){s={error:A}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return u.sort(function(A,L){var T=A.score,N=L.score;return T<N?1:-1}),u},i.prototype.autoSuggest=function(t,e){var s,a,n,u;e===void 0&&(e={}),e=r(r({},j),e);var l=new Map;try{for(var h=o(this.search(t,e)),v=h.next();!v.done;v=h.next()){var S=v.value,w=S.score,F=S.terms,E=F.join(" "),M=l.get(E);M!=null?(M.score+=w,M.count+=1):l.set(E,{score:w,terms:F,count:1})}}catch(k){s={error:k}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}var O=[];try{for(var A=o(l),L=A.next();!L.done;L=A.next()){var T=f(L.value,2),M=T[0],N=T[1],w=N.score,F=N.terms,Y=N.count;O.push({suggestion:M,terms:F,score:w/Y})}}catch(k){n={error:k}}finally{try{L&&!L.done&&(u=A.return)&&u.call(A)}finally{if(n)throw n.error}}return O.sort(function(k,V){var H=k.score,U=V.score;return H<U?1:-1}),O},Object.defineProperty(i.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),i.loadJSON=function(t,e){if(e==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return i.loadJS(JSON.parse(t),e)},i.getDefault=function(t){if($.hasOwnProperty(t))return Ft($,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))},i.loadJS=function(t,e){var s,a,n,u,l=t.index,h=t.documentCount,v=t.nextId,S=t.documentIds,w=t.fieldIds,F=t.fieldLength,E=t.averageFieldLength,M=t.storedFields,O=t.serializationVersion;if(O!==1)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var A=new i(e);A._documentCount=h,A._nextId=v,A._documentIds=I(S),A._fieldIds=w,A._fieldLength=I(F),A._averageFieldLength=E,A._storedFields=I(M),A._index=new tt;try{for(var L=o(l),T=L.next();!T.done;T=L.next()){var N=f(T.value,2),Y=N[0],k=N[1],V=new Map;try{for(var H=(n=void 0,o(Object.keys(k))),U=H.next();!U.done;U=H.next()){var q=U.value,et=k[q],Q=et.df,st=et.ds;V.set(parseInt(q,10),{df:Q,ds:I(st)})}}catch(nt){n={error:nt}}finally{try{U&&!U.done&&(u=H.return)&&u.call(H)}finally{if(n)throw n.error}}A._index.set(Y,V)}}catch(nt){s={error:nt}}finally{try{T&&!T.done&&(a=L.return)&&a.call(L)}finally{if(s)throw s.error}}return A},i.prototype.executeQuery=function(t,e){var s=this;if(e===void 0&&(e={}),typeof t=="string")return this.executeSearch(t,e);var a=t.queries.map(function(n){var u=r(r(r({},e),t),{queries:void 0});return s.executeQuery(n,u)});return this.combineResults(a,t.combineWith)},i.prototype.executeSearch=function(t,e){var s=this;e===void 0&&(e={});var a=this._options,n=a.tokenize,u=a.processTerm,l=a.searchOptions,h=r(r({tokenize:n,processTerm:u},l),e),v=h.tokenize,S=h.processTerm,w=v(t).map(function(M){return S(M)}).filter(function(M){return!!M}),F=w.map(D(h)),E=F.map(function(M){return s.executeQuerySpec(M,h)});return this.combineResults(E,h.combineWith)},i.prototype.executeQuerySpec=function(t,e){var s,a,n,u,l=r(r({},this._options.searchOptions),e),h=(l.fields||this._options.fields).reduce(function(at,Yt){var Tt;return r(r({},at),(Tt={},Tt[Yt]=Ft(at,Yt)||1,Tt))},l.boost||{}),v=l.boostDocument,S=l.weights,w=l.maxFuzzy,F=r(r({},x.weights),S),E=F.fuzzy,M=F.prefix,O=this.termResults(t.term,h,v,this._index.get(t.term)),A,L;if(t.prefix&&(A=this._index.atPrefix(t.term)),t.fuzzy){var T=t.fuzzy===!0?.2:t.fuzzy,N=T<1?Math.min(w,Math.round(t.term.length*T)):T;L=this._index.fuzzyGet(t.term,N)}if(A)try{for(var Y=o(A),k=Y.next();!k.done;k=Y.next()){var V=f(k.value,2),H=V[0],U=V[1],q=H.length-t.term.length;if(q){L?.delete(H);var et=.3*q/H.length;this.termResults(H,h,v,U,O,M,et)}}}catch(at){s={error:at}}finally{try{k&&!k.done&&(a=Y.return)&&a.call(Y)}finally{if(s)throw s.error}}if(L)try{for(var Q=o(L.keys()),st=Q.next();!st.done;st=Q.next()){var H=st.value,nt=f(L.get(H),2),U=nt[0],q=nt[1];if(q){var et=q/H.length;this.termResults(H,h,v,U,O,E,et)}}}catch(at){n={error:at}}finally{try{st&&!st.done&&(u=Q.return)&&u.call(Q)}finally{if(n)throw n.error}}return O},i.prototype.combineResults=function(t,e){if(e===void 0&&(e=ct),t.length===0)return new Map;var s=e.toLowerCase();return t.reduce(b[s])||new Map},i.prototype.toJSON=function(){var t,e,s,a,n=[];try{for(var u=o(this._index),l=u.next();!l.done;l=u.next()){var h=f(l.value,2),v=h[0],S=h[1],w={};try{for(var F=(s=void 0,o(S)),E=F.next();!E.done;E=F.next()){var M=f(E.value,2),O=M[0],A=M[1],L=A.df,T=A.ds;w[O]={df:L,ds:Object.fromEntries(T)}}}catch(N){s={error:N}}finally{try{E&&!E.done&&(a=F.return)&&a.call(F)}finally{if(s)throw s.error}}n.push([v,w])}}catch(N){t={error:N}}finally{try{l&&!l.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._averageFieldLength,storedFields:Object.fromEntries(this._storedFields),index:n,serializationVersion:1}},i.prototype.termResults=function(t,e,s,a,n,u,l){var h,v,S,w,F;if(n===void 0&&(n=new Map),u===void 0&&(u=1),l===void 0&&(l=0),a==null)return n;try{for(var E=o(Object.keys(e)),M=E.next();!M.done;M=E.next()){var O=M.value,A=e[O],L=this._fieldIds[O],T=a.get(L);if(T!=null)try{for(var N=(S=void 0,o(T.ds)),Y=N.next();!Y.done;Y=N.next()){var k=f(Y.value,2),V=k[0],H=k[1],U=s?s(this._documentIds.get(V),t):1;if(U){var q=this._fieldLength.get(V)[L]/this._averageFieldLength[L],et=u*U*y(H,T.df,this._documentCount,q,A,l),Q=n.get(V);if(Q){Q.score+=et;var st=Ft(Q.match,t);st?st.push(O):(Q.match[t]=[O],Q.terms.push(t))}else n.set(V,{score:et,match:(F={},F[t]=[O],F),terms:[t]})}}}catch(nt){S={error:nt}}finally{try{Y&&!Y.done&&(w=N.return)&&w.call(N)}finally{if(S)throw S.error}}}}catch(nt){h={error:nt}}finally{try{M&&!M.done&&(v=E.return)&&v.call(E)}finally{if(h)throw h.error}}return n},i.prototype.addTerm=function(t,e,s){var a=this._index.fetch(s,R),n=a.get(t);if(n==null)n={df:1,ds:new Map},n.ds.set(e,1),a.set(t,n);else{var u=n.ds.get(e);u==null&&(n.df+=1),n.ds.set(e,(u||0)+1)}},i.prototype.removeTerm=function(t,e,s){if(!this._index.has(s)){this.warnDocumentChanged(e,t,s);return}var a=this._index.fetch(s,R),n=a.get(t);n==null||n.ds.get(e)==null?this.warnDocumentChanged(e,t,s):n.ds.get(e)<=1?n.df<=1?a.delete(t):(n.df-=1,n.ds.delete(e)):n.ds.set(e,n.ds.get(e)-1),this._index.get(s).size===0&&this._index.delete(s)},i.prototype.warnDocumentChanged=function(t,e,s){var a,n;if(!(console==null||console.warn==null))try{for(var u=o(Object.keys(this._fieldIds)),l=u.next();!l.done;l=u.next()){var h=l.value;if(this._fieldIds[h]===e){console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(s,'" was not present in field "').concat(h,'". Removing a document after it has changed can corrupt the index!'));return}}}catch(v){a={error:v}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(a)throw a.error}}},i.prototype.addDocumentId=function(t){var e=this._nextId;return this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e},i.prototype.addFields=function(t){for(var e=0;e<t.length;e++)this._fieldIds[t[e]]=e},i.prototype.addFieldLength=function(t,e,s,a){var n=this._fieldLength.get(t);n==null&&this._fieldLength.set(t,n=[]),n[e]=a;var u=this._averageFieldLength[e]||0,l=u*s+a;this._averageFieldLength[e]=l/(s+1)},i.prototype.removeFieldLength=function(t,e,s,a){var n=this._averageFieldLength[e]*s-a;this._averageFieldLength[e]=n/(s-1)},i.prototype.saveStoredFields=function(t,e){var s,a,n=this._options,u=n.storeFields,l=n.extractField;if(!(u==null||u.length===0)){var h=this._storedFields.get(t);h==null&&this._storedFields.set(t,h={});try{for(var v=o(u),S=v.next();!S.done;S=v.next()){var w=S.value,F=l(e,w);F!==void 0&&(h[w]=F)}}catch(E){s={error:E}}finally{try{S&&!S.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}}},i}(),Ft=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)?i[t]:void 0},b=(ht={},ht[ct]=function(i,t){var e,s,a;try{for(var n=o(t.keys()),u=n.next();!u.done;u=n.next()){var l=u.value,h=i.get(l);if(h==null)i.set(l,t.get(l));else{var v=t.get(l),S=v.score,w=v.match,F=v.terms;h.score=(h.score+S)*1.5,h.match=Object.assign(h.match,w),(a=h.terms).push.apply(a,c([],f(F),!1))}}}catch(E){e={error:E}}finally{try{u&&!u.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return i},ht[G]=function(i,t){var e,s,a=new Map;try{for(var n=o(t.keys()),u=n.next();!u.done;u=n.next()){var l=u.value,h=i.get(l);if(h!=null){var v=t.get(l),S=v.score,w=v.match,F=v.terms;a.set(l,{score:h.score+S,match:Object.assign(h.match,w),terms:c(c([],f(h.terms),!1),f(F),!1)})}}}catch(E){e={error:E}}finally{try{u&&!u.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return a},ht[P]=function(i,t){var e,s;try{for(var a=o(t.keys()),n=a.next();!n.done;n=a.next()){var u=n.value;i.delete(u)}}catch(l){e={error:l}}finally{try{n&&!n.done&&(s=a.return)&&s.call(a)}finally{if(e)throw e.error}}return i},ht),g=function(i,t,e){return i*Math.log(e/t)},y=function(i,t,e,s,a,n){var u=a/(1+.333*a*n);return u*g(i,t,e)/s},D=function(i){return function(t,e,s){var a=typeof i.fuzzy=="function"?i.fuzzy(t,e,s):i.fuzzy||!1,n=typeof i.prefix=="function"?i.prefix(t,e,s):i.prefix===!0;return{term:t,fuzzy:a,prefix:n}}},p=function(i){return i.filter(function(t,e,s){return s.indexOf(t)===e})},$={idField:"id",extractField:function(i,t){return i[t]},tokenize:function(i,t){return i.split(K)},processTerm:function(i,t){return i.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},x={combineWith:ct,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},j={prefix:function(i,t,e){return t===e.length-1}},R=function(){return new Map},I=function(i){var t,e,s=new Map;try{for(var a=o(Object.keys(i)),n=a.next();!n.done;n=a.next()){var u=n.value;s.set(parseInt(u,10),i[u])}}catch(l){t={error:l}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return s},K=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;return St})});var Ut=gt((Ct,Jt)=>{(function(r,o){typeof Ct=="object"&&typeof Jt<"u"?o(Ct):typeof define=="function"&&define.amd?define(["exports"],o):o((r||self).logseqDateutils={})})(Ct,function(r){var o=function(c){return c+(c>0?["th","st","nd","rd"][c>3&&c<21||c%10>3?0:c%10]:"")},f=function(c){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][c.getDay()]};r.getDateForPage=function(c,d){var C=c.getFullYear(),z=c.toString().substring(4,7),m=c.getMonth()+1,J=c.getDate(),B=c.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return"[["+z+" "+o(J)+", "+C+"]]";if(d.includes("yyyy")&&(d.includes("MM")||d.includes("MMM"))&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var X=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2),MMMM:B,EEEE:X[c.getDay()],EEE:X[c.getDay()].substring(0,3),E:X[c.getDay()].substring(0,1)};return"[["+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(_){return Z[_]})+"]]"}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var tt={yyyy:C,do:o(J),MMMM:B};return"[["+d.replace(/yyyy|do|MMMM/gi,function(_){return tt[_]})+"]]"}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var ut={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2)};return"[["+d.replace(/yyyy|dd|MM/gi,function(_){return ut[_]})+"]]"}return"[["+z+" "+o(J)+", "+C+"]]"},r.getDateForPageWithoutBrackets=function(c,d){var C=c.getFullYear(),z=c.toString().substring(4,7),m=c.getMonth()+1,J=c.getDate(),B=c.toLocaleString("default",{month:"long"});if(d==="MMM do yyyy")return z+" "+o(J)+", "+C;if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")&&(d.includes("EEEE")||d.includes("EEE")||d.includes("E"))){var X=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2),EEEE:X[c.getDay()],EEE:X[c.getDay()].substring(0,3),E:X[c.getDay()].substring(0,1)};return""+d.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(_){return Z[_]})}if(d==="do MMMM yyyy"||d==="MMMM do, yyyy"){var tt={yyyy:C,do:o(J),MMMM:B};return""+d.replace(/yyyy|do|MMMM/gi,function(_){return tt[_]})}if(d.includes("yyyy")&&d.includes("MM")&&d.includes("dd")){var ut={yyyy:C,dd:("0"+J).slice(-2),MM:("0"+m).slice(-2)};return""+d.replace(/yyyy|dd|MM/gi,function(_){return ut[_]})}return d==="MMMM do, yyyy"?c.toLocaleString("default",{month:"long"})+" "+o(J)+", "+C:d==="do MMM yyyy"?o(J)+" "+z+" "+C:z+" "+o(J)+", "+C},r.getDayInText=f,r.getScheduledDeadlineDateDay=function(c){return c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+f(c).substring(0,3)},r.getScheduledDeadlineDateDayTime=function(c){return c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate()+" "+f(c).substring(0,3)+" "+c.toTimeString().substring(0,5)},r.getYYMMDDTHHMMFormat=function(c){return[c.getFullYear(),("0"+(c.getMonth()+1)).slice(-2),("0"+c.getDate()).slice(-2)].join("-")+"T"+c.toTimeString().substring(0,5)},r.getYYYMMDD=function(c){return[c.getFullYear(),("0"+(c.getMonth()+1)).slice(-2),("0"+c.getDate()).slice(-2)].join("")}})});var Rt=gt(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.parseEDNString=wt.EDNListParser=void 0;var ot;(function(r){r[r.idle=0]="idle",r[r.string=1]="string",r[r.escape=2]="escape",r[r.comment=3]="comment"})(ot||(ot={}));var rt;(function(r){r[r.vector=0]="vector",r[r.list=1]="list",r[r.map=2]="map",r[r.set=3]="set",r[r.tag=4]="tag"})(rt||(rt={}));var ye={t:"	",r:"\r",n:`
`,"\\":"\\",'"':'"'},pe=[","," ","	",`
`,"\r"],ge=/^[-+]?(0|[1-9][0-9]*)$/,ve=/^[-+]?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][+-]?(0|[1-9][0-9]*))?M?$/,me={inst:r=>{if(typeof r!="string")throw new Error("#inst value must be a string");return new Date(r)}},Ot=class{constructor({mapAs:o="doubleArray",setAs:f="object",keywordAs:c="object",charAs:d="object",listAs:C="object",tagHandlers:z={}}={}){this.stack=[],this.mode=ot.idle,this.state="",this.started=!1,this.done=!1,this.mapAs=o,this.setAs=f,this.keywordAs=c,this.charAs=d,this.listAs=C,this.tagHandlers={...me,...z}}updateStack(){if(this.stack.length===0||this.result===void 0)return;let[o,f]=this.stack[this.stack.length-1];if(o===rt.vector)f.push(this.result);else if(o===rt.list)f.push(this.result);else if(o===rt.set)f.push(this.result);else if(o===rt.map)f[1].length>0?f[0].push([f[1].pop(),this.result]):f[1].push(this.result);else if(o===rt.tag){if(this.stack.pop(),f==="_")this.result=void 0;else{let c=this.tagHandlers[f];c?this.result=c(this.result):this.result={tag:f,val:this.result}}this.updateStack();return}this.result=void 0}match(){if(this.state==="nil")this.result=null;else if(this.state==="true")this.result=!0;else if(this.state==="false")this.result=!1;else if(this.state[0]===":")this.result=this.keywordAs==="string"?this.state.substr(1):{key:this.state.substr(1)};else if(this.state[0]==="#")this.stack.push([rt.tag,this.state.substr(1)]),this.result=void 0;else if(ge.test(this.state))this.result=parseInt(this.state,10);else if(ve.test(this.state))this.result=parseFloat(this.state);else if(this.state[0]==="\\"){let o;this.state==="\\space"?o=" ":this.state==="\\newline"?o=`
`:this.state==="\\return"?o="\r":this.state==="\\tab"?o="	":this.state==="\\\\"?o="\\":o=this.state.substr(1),this.charAs==="string"?this.result=o:this.result={char:o}}else this.state!==""&&(this.result={sym:this.state});this.state=""}next(o){let f=[];for(let c=0;c<o.length;c++){this.stack.length===0&&this.result!==void 0&&(f.push(this.result),this.result=void 0);let d=o[c];if(this.mode===ot.idle){if(d==='"'){this.match(),this.updateStack(),this.mode=ot.string,this.state="";continue}if(d===";"){this.mode=ot.comment;continue}if(pe.includes(d)){this.match(),this.updateStack();continue}if(d==="}"){if(this.match(),this.updateStack(),this.stack.length!==0){let[z,m]=this.stack.pop();z===rt.map?this.mapAs==="object"?this.result=m[0].reduce((J,[B,X])=>({...J,[B]:X}),{}):this.mapAs==="map"?this.result=new Map(m[0]):this.result={map:m[0]}:this.setAs==="array"?this.result=m:this.setAs==="set"?this.result=new Set(m):this.result={set:m}}this.updateStack();continue}if(d==="]"){this.match(),this.updateStack();let[z,m]=this.stack.pop();this.result=m,this.updateStack();continue}if(d===")"){if(this.match(),this.updateStack(),this.stack.length===0)return this.result!==void 0&&f.push(this.result),this.done=!0,f;let[z,m]=this.stack.pop();this.listAs==="array"?this.result=m:this.result={list:m},this.updateStack();continue}if(d==="["){this.match(),this.updateStack(),this.stack.push([rt.vector,[]]);continue}else if(d==="("){if(!this.started){this.started=!0;continue}this.match(),this.updateStack(),this.stack.push([rt.list,[]]);continue}let C=this.state+d;if(C==="#_"){this.stack.push([rt.tag,d]),this.result=void 0,this.state="";continue}if(C.endsWith("#{")){this.state=this.state.slice(0,-1),this.match(),this.updateStack(),this.stack.push([rt.set,[]]),this.state="";continue}if(d==="{"){this.match(),this.updateStack(),this.stack.push([rt.map,[[],[]]]),this.state="";continue}this.state+=d;continue}else if(this.mode===ot.string){if(d==="\\"){this.stack.push([this.mode,this.state]),this.mode=ot.escape,this.state="";continue}if(d==='"'){this.mode=ot.idle,this.result=this.state,this.updateStack(),this.state="";continue}this.state+=d}else if(this.mode===ot.escape){let C=ye[d],[z,m]=this.stack.pop();this.mode=z,this.state=m+C}else this.mode===ot.comment&&d===`
`&&(this.mode=ot.idle)}return f}isDone(){return this.done}};wt.EDNListParser=Ot;wt.parseEDNString=(r,o)=>{let f=new Ot(o),[c]=f.next("("+r+")");return c===void 0?null:c}});var Vt=gt(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.toEDNStringFromSimpleObject=W.toEDNString=W.toSymbol=W.toKeyword=W.tagValue=void 0;var Se=r=>r.key!==void 0,Fe=r=>r.sym!==void 0,we=r=>r.map!==void 0,Me=r=>r.set!==void 0,Ee=r=>r.list!==void 0,De=r=>r.tag!==void 0,$e=r=>r.char!==void 0;W.tagValue=(r,o)=>({tag:r,val:o});W.toKeyword=r=>({key:r});W.toSymbol=r=>({sym:r});W.toEDNString=r=>{if(typeof r=="string")return JSON.stringify(r);if(Array.isArray(r))return`[${r.map(W.toEDNString).join(" ")}]`;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return JSON.stringify(r);if(r===null)return"nil";if(r instanceof Date)return`#inst "${r.toISOString()}"`;if(typeof r=="bigint")return`${r}N`;if(r instanceof Map)return`{${[...r].map(([o,f])=>`${W.toEDNString(o)} ${W.toEDNString(f)}`).join(" ")}}`;if(r instanceof Set)return`#{${[...r].map(W.toEDNString).join(" ")}}`;if(we(r))return`{${r.map.map(([o,f])=>`${W.toEDNString(o)} ${W.toEDNString(f)}`).join(" ")}}`;if(Me(r))return`#{${r.set.map(W.toEDNString).join(" ")}}`;if(Se(r))return`:${r.key}`;if(Fe(r))return r.sym;if(Ee(r))return`(${r.list.map(W.toEDNString).join(" ")})`;if(De(r))return`#${r.tag} ${W.toEDNString(r.val)}`;if($e(r))return`\\${r.char}`;throw new TypeError(`Unknown type: ${JSON.stringify(r)}`)};W.toEDNStringFromSimpleObject=(r,o={keysAs:"keyword"})=>{if(typeof r=="string")return JSON.stringify(r);if(Array.isArray(r))return`[${r.map(f=>W.toEDNStringFromSimpleObject(f,o)).join(" ")}]`;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return JSON.stringify(r);if(r===null)return"nil";if(r instanceof Date)return`#inst "${r.toISOString()}"`;if(typeof r=="bigint")return`${r}N`;if(r instanceof Map)return`{${[...r].map(([f,c])=>`${W.toEDNStringFromSimpleObject(f,o)} ${W.toEDNStringFromSimpleObject(c,o)}`).join(" ")}}`;if(r instanceof Set)return`#{${[...r].map(f=>W.toEDNStringFromSimpleObject(f,o)).join(" ")}}`;if(typeof r=="object")return`{${Object.entries(r).map(([f,c])=>`${o.keysAs==="string"?JSON.stringify(f):`:${f}`} ${W.toEDNStringFromSimpleObject(c,o)}`).join(" ")}}`;throw new TypeError(`Unknown type: ${JSON.stringify(r)}`)}});var Gt=gt(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var xe=Rt();Object.defineProperty(dt,"parseEDNString",{enumerable:!0,get:function(){return xe.parseEDNString}});var $t=Vt();Object.defineProperty(dt,"toEDNString",{enumerable:!0,get:function(){return $t.toEDNString}});Object.defineProperty(dt,"toEDNStringFromSimpleObject",{enumerable:!0,get:function(){return $t.toEDNStringFromSimpleObject}});Object.defineProperty(dt,"tagValue",{enumerable:!0,get:function(){return $t.tagValue}});Object.defineProperty(dt,"toKeyword",{enumerable:!0,get:function(){return $t.toKeyword}});Object.defineProperty(dt,"toSymbol",{enumerable:!0,get:function(){return $t.toSymbol}})});var Kt=gt((jt,Pt)=>{(function(r,o){typeof jt=="object"&&typeof Pt<"u"?Pt.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=o()})(jt,function(){"use strict";var r=1e3,o=6e4,f=36e5,c="millisecond",d="second",C="minute",z="hour",m="day",J="week",B="month",X="quarter",Z="year",tt="date",ut="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,pt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,zt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Dt=function(b,g,y){var D=String(b);return!D||D.length>=g?b:""+Array(g+1-D.length).join(y)+b},At={s:Dt,z:function(b){var g=-b.utcOffset(),y=Math.abs(g),D=Math.floor(y/60),p=y%60;return(g<=0?"+":"-")+Dt(D,2,"0")+":"+Dt(p,2,"0")},m:function b(g,y){if(g.date()<y.date())return-b(y,g);var D=12*(y.year()-g.year())+(y.month()-g.month()),p=g.clone().add(D,B),$=y-p<0,x=g.clone().add(D+($?-1:1),B);return+(-(D+(y-p)/($?p-x:x-p))||0)},a:function(b){return b<0?Math.ceil(b)||0:Math.floor(b)},p:function(b){return{M:B,y:Z,w:J,d:m,D:tt,h:z,m:C,s:d,ms:c,Q:X}[b]||String(b||"").toLowerCase().replace(/s$/,"")},u:function(b){return b===void 0}},ft="en",lt={};lt[ft]=zt;var ht=function(b){return b instanceof St},ct=function b(g,y,D){var p;if(!g)return ft;if(typeof g=="string"){var $=g.toLowerCase();lt[$]&&(p=$),y&&(lt[$]=y,p=$);var x=g.split("-");if(!p&&x.length>1)return b(x[0])}else{var j=g.name;lt[j]=g,p=j}return!D&&p&&(ft=p),p||!D&&ft},G=function(b,g){if(ht(b))return b.clone();var y=typeof g=="object"?g:{};return y.date=b,y.args=arguments,new St(y)},P=At;P.l=ct,P.i=ht,P.w=function(b,g){return G(b,{locale:g.$L,utc:g.$u,x:g.$x,$offset:g.$offset})};var St=function(){function b(y){this.$L=ct(y.locale,null,!0),this.parse(y)}var g=b.prototype;return g.parse=function(y){this.$d=function(D){var p=D.date,$=D.utc;if(p===null)return new Date(NaN);if(P.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var x=p.match(_);if(x){var j=x[2]-1||0,R=(x[7]||"0").substring(0,3);return $?new Date(Date.UTC(x[1],j,x[3]||1,x[4]||0,x[5]||0,x[6]||0,R)):new Date(x[1],j,x[3]||1,x[4]||0,x[5]||0,x[6]||0,R)}}return new Date(p)}(y),this.$x=y.x||{},this.init()},g.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},g.$utils=function(){return P},g.isValid=function(){return this.$d.toString()!==ut},g.isSame=function(y,D){var p=G(y);return this.startOf(D)<=p&&p<=this.endOf(D)},g.isAfter=function(y,D){return G(y)<this.startOf(D)},g.isBefore=function(y,D){return this.endOf(D)<G(y)},g.$g=function(y,D,p){return P.u(y)?this[D]:this.set(p,y)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(y,D){var p=this,$=!!P.u(D)||D,x=P.p(y),j=function(a,n){var u=P.w(p.$u?Date.UTC(p.$y,n,a):new Date(p.$y,n,a),p);return $?u:u.endOf(m)},R=function(a,n){return P.w(p.toDate()[a].apply(p.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(n)),p)},I=this.$W,K=this.$M,i=this.$D,t="set"+(this.$u?"UTC":"");switch(x){case Z:return $?j(1,0):j(31,11);case B:return $?j(1,K):j(0,K+1);case J:var e=this.$locale().weekStart||0,s=(I<e?I+7:I)-e;return j($?i-s:i+(6-s),K);case m:case tt:return R(t+"Hours",0);case z:return R(t+"Minutes",1);case C:return R(t+"Seconds",2);case d:return R(t+"Milliseconds",3);default:return this.clone()}},g.endOf=function(y){return this.startOf(y,!1)},g.$set=function(y,D){var p,$=P.p(y),x="set"+(this.$u?"UTC":""),j=(p={},p[m]=x+"Date",p[tt]=x+"Date",p[B]=x+"Month",p[Z]=x+"FullYear",p[z]=x+"Hours",p[C]=x+"Minutes",p[d]=x+"Seconds",p[c]=x+"Milliseconds",p)[$],R=$===m?this.$D+(D-this.$W):D;if($===B||$===Z){var I=this.clone().set(tt,1);I.$d[j](R),I.init(),this.$d=I.set(tt,Math.min(this.$D,I.daysInMonth())).$d}else j&&this.$d[j](R);return this.init(),this},g.set=function(y,D){return this.clone().$set(y,D)},g.get=function(y){return this[P.p(y)]()},g.add=function(y,D){var p,$=this;y=Number(y);var x=P.p(D),j=function(K){var i=G($);return P.w(i.date(i.date()+Math.round(K*y)),$)};if(x===B)return this.set(B,this.$M+y);if(x===Z)return this.set(Z,this.$y+y);if(x===m)return j(1);if(x===J)return j(7);var R=(p={},p[C]=o,p[z]=f,p[d]=r,p)[x]||1,I=this.$d.getTime()+y*R;return P.w(I,this)},g.subtract=function(y,D){return this.add(-1*y,D)},g.format=function(y){var D=this,p=this.$locale();if(!this.isValid())return p.invalidDate||ut;var $=y||"YYYY-MM-DDTHH:mm:ssZ",x=P.z(this),j=this.$H,R=this.$m,I=this.$M,K=p.weekdays,i=p.months,t=function(n,u,l,h){return n&&(n[u]||n(D,$))||l[u].substr(0,h)},e=function(n){return P.s(j%12||12,n,"0")},s=p.meridiem||function(n,u,l){var h=n<12?"AM":"PM";return l?h.toLowerCase():h},a={YY:String(this.$y).slice(-2),YYYY:this.$y,M:I+1,MM:P.s(I+1,2,"0"),MMM:t(p.monthsShort,I,i,3),MMMM:t(i,I),D:this.$D,DD:P.s(this.$D,2,"0"),d:String(this.$W),dd:t(p.weekdaysMin,this.$W,K,2),ddd:t(p.weekdaysShort,this.$W,K,3),dddd:K[this.$W],H:String(j),HH:P.s(j,2,"0"),h:e(1),hh:e(2),a:s(j,R,!0),A:s(j,R,!1),m:String(R),mm:P.s(R,2,"0"),s:String(this.$s),ss:P.s(this.$s,2,"0"),SSS:P.s(this.$ms,3,"0"),Z:x};return $.replace(pt,function(n,u){return u||a[n]||x.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(y,D,p){var $,x=P.p(D),j=G(y),R=(j.utcOffset()-this.utcOffset())*o,I=this-j,K=P.m(this,j);return K=($={},$[Z]=K/12,$[B]=K,$[X]=K/3,$[J]=(I-R)/6048e5,$[m]=(I-R)/864e5,$[z]=I/f,$[C]=I/o,$[d]=I/r,$)[x]||I,p?K:P.a(K)},g.daysInMonth=function(){return this.endOf(B).$D},g.$locale=function(){return lt[this.$L]},g.locale=function(y,D){if(!y)return this.$L;var p=this.clone(),$=ct(y,D,!0);return $&&(p.$L=$),p},g.clone=function(){return P.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},b}(),Ft=St.prototype;return G.prototype=Ft,[["$ms",c],["$s",d],["$m",C],["$H",z],["$W",m],["$M",B],["$y",Z],["$D",tt]].forEach(function(b){Ft[b[1]]=function(g){return this.$g(g,b[0],b[1])}}),G.extend=function(b,g){return b.$i||(b(g,St,G),b.$i=!0),G},G.locale=ct,G.isDayjs=ht,G.unix=function(b){return G(1e3*b)},G.en=lt[ft],G.Ls=lt,G.p={},G})});var Zt=gt((Ye,_t)=>{"use strict";var Ae=require("os"),Qt=Ae.homedir();_t.exports=r=>{if(typeof r!="string")throw new TypeError(`Expected a string, got ${typeof r}`);return Qt?r.replace(/^~(?=$|\/|\\)/,Qt):r}});var ke={};ce(ke,{default:()=>ae});module.exports=de(ke);var it=require("@raycast/api"),mt=require("react"),ie=vt(Ht()),se=require("@raycast/api");var Et=require("@raycast/api"),be=vt(Ut()),qt=vt(Gt()),Bt=vt(require("path")),Ce=vt(Kt()),Lt=vt(require("fs")),Xt=vt(Zt());var Oe=r=>Lt.default.promises.lstat(r).then(o=>{if(!o.isDirectory())throw`Folder does not exist: ${r}`}).catch(o=>{throw o.code==="ENOENT"?`Folder does not exist: ${r}`:"Error"}),Mt=()=>(0,Xt.default)((0,Et.getPreferenceValues)().graphPath),te=()=>Oe(Mt()),Le=()=>{let r=Bt.default.join(Mt(),"/logseq/config.edn");return Lt.default.promises.readFile(r,{encoding:"utf8"}).then(o=>(0,qt.parseEDNString)(o.toString(),{mapAs:"object",keywordAs:"string"}))},ee=()=>Le().then(r=>r["preferred-format"]||"md");var re=()=>{(0,Et.showToast)({style:Et.Toast.Style.Failure,title:"Logseq graph path is invalid",message:"Update the path and try again."})};var ne=async r=>Lt.default.promises.readdir(r).then(o=>o.map(f=>Bt.default.join(r,f))),xt=r=>{let o=r.split("/");return o[o.length-1]},It=r=>{let o=Mt().split("/")[Mt().split("/").length-1],f=r.split("/")[r.split("/").length-1];return encodeURI(`logseq://graph/${o}?page=${f}`)};var yt=require("react/jsx-runtime");function ae(){let{state:r,search:o}=Te();return(0,mt.useEffect)(()=>{te().catch(f=>{throw re(),"Folder Does not Exist"})},[o]),(0,yt.jsx)(it.List,{isLoading:r.isLoading,onSearchTextChange:o,searchBarPlaceholder:"Search Logseq Database...",throttle:!0,children:(0,yt.jsx)(it.List.Section,{title:"Results",subtitle:r.results.length+"",children:r.results.map(f=>(0,yt.jsx)(ze,{searchResult:f},f.name))})})}function ze({searchResult:r}){return console.log(r.url),(0,yt.jsx)(it.List.Item,{title:r.name,subtitle:r.description,actions:(0,yt.jsx)(it.ActionPanel,{children:(0,yt.jsx)(it.ActionPanel.Section,{children:(0,yt.jsx)(it.Action.OpenInBrowser,{title:"Open in Logseq",url:r.url})})})})}function Te(){let[r,o]=(0,mt.useState)({results:[],isLoading:!0}),f=(0,mt.useCallback)(async function(d){o(C=>({...C,isLoading:!0}));try{let C=await Ne(d);o(z=>({...z,results:C,isLoading:!1}))}catch(C){o(z=>({...z,isLoading:!1})),console.error("search error",C),(0,it.showToast)({style:it.Toast.Style.Failure,title:"Could not perform search",message:String(C)})}},[o]);return(0,mt.useEffect)(()=>{f("")},[]),{state:r,search:f}}async function Ne(r){let o=await ee().then(c=>`.${c}`),f=[];return await ne(Mt()+"/pages").then(c=>{if((0,se.getPreferenceValues)().smartSearch==!0&&r.length>0){let d=[];c.forEach(m=>{m.endsWith(o)&&d.push({name:xt(m).replace(o,""),description:xt(m),url:It(m).replace(o,"")})});let C=new ie.default({fields:["name"],storeFields:["name","url"],idField:"name"});C.addAll(d);let z=C.search(r);for(let m in z)f.push({name:z[m].name,description:z[m].name+o,url:z[m].url})}else c.forEach(d=>{d.endsWith(o)&&d.toLowerCase().includes(r.toLowerCase())&&f.push({name:xt(d).replace(o,""),description:xt(d),url:It(d).replace(o,"")})})}),f}
/*! Bundled license information:

minisearch/dist/umd/index.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)
*/
